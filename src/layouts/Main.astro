---
import { getImage } from "astro:assets";
import faviconSvgSrc from "../assets/favicon.svg";
import faviconPngSrc from "../assets/favicon.png";
import openGraphImageSrc from "../assets/opengraph-thumbnail.png";
import Header from "@/components/ui/Header.astro";

import "@/styles/global.css";

const { page } = Astro.props;

const baseTitle = "alex-xo";
const pageTitle = page?.title || baseTitle;
const pageDescription = page?.description || "";
const navActive = page?.navActive;

const appleTouchIcon = await getImage({
  src: faviconPngSrc,
  width: 180,
  height: 180,
  format: "png",
});
const faviconSvg = await getImage({ src: faviconSvgSrc, format: "svg" });
const openGraphImage = await getImage({
  src: openGraphImageSrc,
  width: 1200,
  height: 630,
  format: "png",
});
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<!doctype html>
<html lang="en" class="bg-white dark:bg-gray-950 scheme-light dark:scheme-dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" href="/favicon.ico" sizes="32x32" />
    <link rel="icon" href={faviconSvg.src} type="image/svg+xml" />
    <link rel="apple-touch-icon" href={appleTouchIcon.src} />

    <link rel="sitemap" href="/sitemap-index.xml" />

    <title>{pageTitle}</title>
    <meta name="description" content={pageDescription} />
    <link rel="canonical" href={canonicalURL} />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={pageDescription} />

    <meta property="og:image" content={openGraphImage.src} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:type" content="image/png" />
  </head>
  <body class="bg-background font-sans">
    <Header navActive={navActive} />
    <main class="relative z-0">
      <slot />
    </main>

    <script
      defer
      src="https://static.cloudflareinsights.com/beacon.min.js"
      data-cf-beacon='{"token": "fb1ca0c7f61f411281cb42894793f2bc"}'></script>
  </body>
</html>
